# 영화 예매 시스템

## 요구사항

### 상영(Screening)
- 하나의 영화는 하루 중 다양한 시간대에 걸쳐 한 번 이상 상영될 수 있다.

### 할인(Discount)
- 특정한 조건을 만족하는 예매자는 요금을 할인받을 수 있다.
- 기간조건은 요일, 시작 시간, 종료 시간의 세 부분으로 구성된다.
- 영화 시작 시간이 기간조건안에 포함될 경우 요금을 할인한다.
- 할인 조건은 다수의 할인 조건을 함께 지정할 수 있다.
- 순서 조건과 기간 조건을 섞는 것도 가능하다.
- 할인을 적용하기 위해서는 할인 조건과 할인 정책을 함께 조합해서 사용한다.
- 사용자의 예매 정보가 할인 조건 중 하나라도 만족하는지 검사한다.
- 할인 조건을 만족할 경우 할인 정책을 이용해 할인 요금을 계산하다.

#### 할인 정책(Discount Policy)
- 할인 정책은 금액 할인 정책과 비율 할인 정책으로 구분된다.
- 영화별로 하나의 할인 정책만 할당할 수 있다.
- 할인 정책은 적용돼 있지만 할인 조건을 만족하지 못하는 경우는 요금을 할인하지 않는다.
- 할인 정책이 적용돼 있지 않은 경우에는 요금을 할인하지 않는다.
- 할인 정책은 1인 기준으로 책정된다.
- 할인 정책을 지정하지 않는 것도 가능하다.

### 예매(Reservation)
- 사용자가 예매를 완료하면 예매 정보를 생성한다.


## 용어사전

| 한글명 | 영문명 | 설명 |
| --- | --- | --- |
|영화|Movie|영화에 대한 기본 정보를 표현. 제목, 상영시간, 가격 정보 등을 가리킨다.|
|상영|Screening|실제 관객들이 영화를 관람하는 사건을 표현. 상영 일자, 시간, 순번 등을 가리킨다.|
|할인 조건|discount condition|가격의 할인 여부를 결정한다.|
|순서 조건|sequence condition|상영 순번을 이용해 할인 여부를 결정하는 규칙.|
|기간 조건|period condition|영화 상영 시작 시간을 이용해 할인 여부를 결정하는 규칙.|
|할인 정책|discount policy|할인 요금을 결정한다.|
|금액 할인 정책|amount discount policy|예매 요금에서 일정 금액을 할인해주는 방식.|
|비율 할인 정책|percent discount policy|정가에서 일정 비율의 요금을 할인해 주는 방식.|
|예매 정보|Reservation|예매가 완료된 사용자에게 제공되는 정보. 제목, 상영정보, 인원, 정가, 결제금액이 포함된다.|

## 모델링

### 상영(Screening)

- `Screening`은 상영할 영화(`movie`), 순번(`sequence`), 상영 시작 시간(`whenScreened`)를 가진다.
- Movies는 제목과 사영시간 기본 요금, 할인정책을 속성으로 가진다. 이 속성들의 값은 생성자를 통해 전달받는다.

## 부가 정보

### 할인 정책과 할인 조건이 지정된 영화

|영화|할인 정책|할인 조건|
|---|---|---|
|**아바타**<br/>(가격:10,000원)|**금액 할인 정책**<br/>(할인액: 800원)|**순번 조건**<br/>조조 상영|
|||**순번 조건**<br/>10회 상영|
|||**기간 조건**<br/>월요일 10:00 ~ 12:00 사이 상영 시작|
|||**기간 조건**<br/>월요일 18:00 ~ 21:00 사이 상영 시작|
|**타이타닉**<br/>(가격:11,000원)|**비율 할인 정책**<br/>(할인율: 10%)|**기간 조건**<br/>화요일 14:00 ~ 17:00 사이 상영 시작|
|||**순번 조건**<br/>2회 상영|
|||**기간 조건**<br/>목요일 10:00 ~ 14:00 사이 상영 시작|
|**스타워즈**<br/>(가격:10,000원)|없음|없음|


# Study

## 유연한 설계

|영화|할인 정책|할인 조건|
|---|---|---|
|**스타워즈**<br/>(가격:10,000원)|없음|없음|

위 표의 `스타워즈`의 할인 정책을 구현하기 위해서는 코드의 수정 없이 `NoneDiscountPolicy` 클래스만 추가하면 그만이다.

![추상화를 이용하면 기존 코드를 수정하지 않고도 기능을 확장할 수 있다](https://github.com/myhency/myImages/blob/master/Object/chapter-02-05-001.png?raw=true)