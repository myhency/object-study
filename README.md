# 영화 예매 시스템

## 요구사항

### 상영(Screening)
- 하나의 영화는 하루 중 다양한 시간대에 걸쳐 한 번 이상 상영될 수 있다.

### 할인(Discount)
- 특정한 조건을 만족하는 예매자는 요금을 할인받을 수 있다.
- 기간조건은 요일, 시작 시간, 종료 시간의 세 부분으로 구성된다.
- 영화 시작 시간이 기간조건안에 포함될 경우 요금을 할인한다.
- 할인 조건은 다수의 할인 조건을 함께 지정할 수 있다.
- 순서 조건과 기간 조건을 섞는 것도 가능하다.
- 할인을 적용하기 위해서는 할인 조건과 할인 정책을 함께 조합해서 사용한다.
- 사용자의 예매 정보가 할인 조건 중 하나라도 만족하는지 검사한다.
- 할인 조건을 만족할 경우 할인 정책을 이용해 할인 요금을 계산하다.

#### 할인 정책(Discount Policy)
- 할인 정책은 금액 할인 정책과 비율 할인 정책으로 구분된다.
- 영화별로 하나의 할인 정책만 할당할 수 있다.
- 할인 정책은 적용돼 있지만 할인 조건을 만족하지 못하는 경우는 요금을 할인하지 않는다.
- 할인 정책이 적용돼 있지 않은 경우에는 요금을 할인하지 않는다.
- 할인 정책은 1인 기준으로 책정된다.
- 할인 정책을 지정하지 않는 것도 가능하다.

### 예매(Reservation)
- 사용자가 예매를 완료하면 예매 정보를 생성한다.


## 용어사전

| 한글명 | 영문명 | 설명 |
| --- | --- | --- |
|영화|Movie|영화에 대한 기본 정보를 표현. 제목, 상영시간, 가격 정보 등을 가리킨다.|
|상영|Screening|실제 관객들이 영화를 관람하는 사건을 표현. 상영 일자, 시간, 순번 등을 가리킨다.|
|할인 조건|discount condition|가격의 할인 여부를 결정한다.|
|순서 조건|sequence condition|상영 순번을 이용해 할인 여부를 결정하는 규칙.|
|기간 조건|period condition|영화 상영 시작 시간을 이용해 할인 여부를 결정하는 규칙.|
|할인 정책|discount policy|할인 요금을 결정한다.|
|금액 할인 정책|amount discount policy|예매 요금에서 일정 금액을 할인해주는 방식.|
|비율 할인 정책|percent discount policy|정가에서 일정 비율의 요금을 할인해 주는 방식.|
|예매 정보|Reservation|예매가 완료된 사용자에게 제공되는 정보. 제목, 상영정보, 인원, 정가, 결제금액이 포함된다.|

## 모델링

### 상영(Screening)

- `Screening`은 상영할 영화(`movie`), 순번(`sequence`), 상영 시작 시간(`whenScreened`)를 가진다.
- Movies는 제목과 사영시간 기본 요금, 할인정책을 속성으로 가진다. 이 속성들의 값은 생성자를 통해 전달받는다.



# Study

## 업캐스팅(upcasting)

![자식 클래스가 부모 클래스의 타입으로 변환되는 업캐스팅](https://github.com/myhency/myImages/blob/master/Object/chapter-02-04-001.png?raw=true)

- 자식 클래스가 부모 클래스를 대신하는 것

## 다형성

- 동일한 메시지를 전송하지만 실제로 어떤 메서드가 실행될 것인지는 메시지를 수신하는 객체의 클래스가 무엇이냐에 따라 달라진다.

> 컴파일 시간 의존성은 `Movie` → `DiscountPolicy`
>
> 실행 시간 의존성은 `Movie` → `AmountDiscountPolicy || PercentDiscountPolicy`

- 동일한 메시지를 수신했을 때 객체의 타입에 따라 다르게 응답할 수 있는 능력을 의미.
- 다형적인 협력에 참여하는 객체들은 모두 같은 메시지를 이해할 수 있어야 한다. → 인터페이스가 동일해야 한다. 

### 지연 바인딩(lazy binding) 또는 동적 바인딩(dynamic binding)

메시지에 응답하기 위해 실행될 메서드를 컴파일 시점이 아닌 실행 시점에 결정한다. 즉, 메시지와 메서드를 실행 시점에 바인딩한다는 것.

### 인터페이스와 다형성

구현은 공유할 필요가 없고 순수하게 인터페이스만 공유하고 싶을 때 사용. 
구현에 대한 고려 없이 다형적인 협력에 참여하는 클래스들이 공유 가능한 외부 인터페이스를 정의한 것.

![자바 인터페이스와 다형성](https://github.com/myhency/myImages/blob/master/Object/chapter-02-04-002.png?raw=true)


